h1. hey!

Workflow assumptions

- Inputs are fastq not bam (the RESORTBAM os not active)
- Temporary files are not removed (the REMOVETEMPFILES is not active)
- The AnisimovLauncher is not used in this workflow


Changelog

June 22, 2016:
- The tool SNVMix is not used, so removed from the run fil
- The tool SAMBAMBA is also not used
- Deleted all mentions of INPUTDIR and SAMPLEDIR 
- The following options are not in use:
-  	MEMPROFCOMMAND 
- 	IGVDIR
- 	PBSPROJECTID 
-	PBSQUEUEWGEN    
- 	SKIPVCALL
- 	INPUTTYPE 
- 	DISEASE 
- 	GROUPNAMES	
- 	LABINDEX 
- 	LANEINDEX
- 	SOMATIC_CALLER
- 	BAM2FASTQFLAG
- 	BAM2FASTQPARMS
- 	REVERTSAM
- 	FASTQCFLAG
- 	FASTQCPARMS
- 	CHUNKFASTQ
- 	BWAPARAMS
- 	NOVOPARAMS
- 	BLATPARAMS
- 	REALIGNPARMS
- 	REMOVE_DUP
- 	REORDERSAM
- 	REALIGNORDER
- 	PEDIGREE
- 	VARIANT_TYPE
- 	UNIFIEDGENOTYPERPARMS
- 	SNVMIX2PARMS
- 	SNVMIX2FILTER 
- 	EPILOGUE
- 	GENOMEBUILD
- 	EMIT_ALL_SITES
- 	DEPTH_FILTER
- 	TARGETTED
- 	KGENOME
-	ONTARGET
-	NOVOINDEX
-	BWAMEMINDEX
-	NOVODIR
- 	BWADIR
-	BWAMEMDIR
- 	SNVMIXDIR
- 	PBSCPUOTHEREXOME
- 	PBSCPUOTHERWGEN
- 	PBSCPUOTHEREXOME
- 	CPUALIGNWGEN
- 	SNV_CALLER
- 	RECALIBRATOR

New and changed parameters and meanings:
- PBSWALLTIME : wall time for the job (still need to account for this in the workflow code)
- PBSCORES: instead of PBSTHREADS
- PBSQUEUE: instead of PBSQUEUEEXOME
- TMPDIR: folder for temporary files
- MAP_CUTOFF: Minimum quality cutoff
- DUP_CUTOFF: Maximum duplication level cutoff
- BWADIR : Directory of the BWA MEM
- CHRNAMES: Instead of CHRINDEX to represent the crhomosomes/ contigs under consideration (The existing names are approapriate for use with soybeans as is)
- SAMPLEINFORMATION: This entry was repeated twice in the original file. Just keep the entry directing to the sampleinfo file
- BWAINDEX: points to the indexed reference genome, and should be passed to the align_dedup.sh
- SCRIPTDIR

Code changes:
- pbs.MERGE
- Use the variable alignjobid : instead of jobid, and save to pbs.ALIGN and pbs.summary_dependencies (to solve problems in deducing the right pbs job id in the queue)
- ALIGNERTOOL: checks for the tools used for alignment (instead of the variable ALIGNER 
- gatkdir: this is introduced instead of gatk_dir
- NOVOCRAFT is introduced as replacement for NOVOSORT to allow for the use of both novoalign and novosort
- A new variable INDELDIR: directory of known indels split by chromosome name


To do:
- The old pipeline assumes that all tools are module loaded first then called directly. For more generality, the complete path of each tool is specified instead: SAMMODULE is replaced with SAMDIR, and the variable name is samtools. Still need to check the full path of each tool and update that the executable actually exists. So far, the following paths have been integrated:
-	BWAMEMDIR
-	SAMTOOLSDIR
-	NOVOCRAFTDIR
-	SAMBLASTERDIR (just to allow the option, not sure if will be of value)

Analysis types supported:
* Currently, there are the following options:
-  ALIGNMENT, ALIGN, ALIGN_ONLY : to only do alignment. The pipeline stops at this stage
-  Anything else would cause the complete gatk pipeline to run until variant calling stage

* Useful analysis options (to do, but check variables naming first!):
-  REALIGN_ONLY: alignment + indel realignment + variant calling + variant recalibration
-  RECALIBRATE_ONLY: alignment + BQSR + variant calling + variant recalibration
-  VCALL: alignment + realignment + recalibration + variant calling
-  FULL: run the entire pipeline: alignment + realignment + recalibration + variant calling + variant recalibration

* Useful debugging options:
It would be handy if the pipeline could do a single piece of work as desired. For example:
-  ALIGN: only perform alignment and exit ---> already implemented
-  REALIGN: only perform realignment
-  RECALIBRATE: only perform recalibration
-  VCALL_ONLY: to only do variant calling
-  VQSR_ONLY: to only do variant recalibration
